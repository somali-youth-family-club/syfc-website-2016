!function(e){"use strict";function o(e,o){console.log("displaying map on",e);var t,n;t=new google.maps.Geocoder;var s={zoom:15,center:new google.maps.LatLng(47.6062,122.3321),zoomControl:!0,mapTypeControl:!1};n=new google.maps.Map(e,s),t&&t.geocode({address:o},function(e,t){if(t===google.maps.GeocoderStatus.OK&&t!=google.maps.GeocoderStatus.ZERO_RESULTS){n.setCenter(e[0].geometry.location);new google.maps.Marker({position:e[0].geometry.location,map:n,title:o})}else console.log("geocoding address failed:",t)})}function t(o,t){console.log("getting wordpress events, url is",bambooAjax.ajaxurl);var s=o.attr("data-nonce");o.addClass("loading"),e.ajax({dataType:"json",url:bambooAjax.ajaxurl,data:{action:"filter_events",event_type:JSON.stringify(t),nonce:s},success:function(e){console.log("yay! success!",e),"success"==e.type?(console.log(e),n(o,e.events)):console.log("error getting events",e)},error:function(e){console.log(e)}})}function n(e,o){for(var t,n="",s=0;s<o.length;s++)t=o[s],n+='<li class="event-box '+t.event_type+'"><div class="date">'+t.event_date.month+'<span class="day">'+t.event_date.day+"</span></div>",n+="<h3>"+t.post_title+"</h3>",n+="<p>"+t.post_content.substring(0,100)+"... </p>","1"===t.need_volunteers&&(n+='<span class="volunteers">We need volunteers!</span>'),n+='<a href="'+t.permalink+'" class="button">Full Event</a>',n+="</li>";e.removeClass("loading"),e.html(n)}FastClick.attach(document.body);var s,a=e(".map-box");a.each(function(){s=e(this).data("address"),console.log(s),o(this,s)});var l=e(".js-accordion-content");if(l.length>0&&(console.log("we have accordions"),l.each(function(){var o=e(this);o.data("height",o.height()),this.style.height=0}),e(document.body).on("click",".js-accordion-trigger",function(o){o.preventDefault();var t=e(this),n=e(this).next(".js-accordion-content");t.hasClass("open")?(t.removeClass("open"),n.css("height",0)):(t.addClass("open"),n.css("height",n.data("height")+"px"))}),window.location.hash)){var c=document.getElementById(window.location.hash.substring(1));c&&e(c).trigger("click")}var r=e(".search-trigger");r&&(r.on("click",function(o){o.preventDefault(),e(this).parents(".search-form").toggleClass("open")}),e(document.body).on("click",function(o){e(event.target).closest(".search-form").length||r.parents(".search-form").removeClass("open")}));var i=e(".js-menu-trigger");i.on("click",function(o){o.preventDefault(),e(this).toggleClass("open")}),Modernizr.mq("only screen and (max-width: 869px)");var g=e(".event-list"),d=e(".js-event-filters");g&&(t(g,""),d.on("click","a",function(o){o.preventDefault();var n=e(this);if(!n.hasClass("selected")){d.find("a").removeClass("selected"),n.addClass("selected");var s=n.data("type");"all"===s&&(s=""),t(g,s)}}))}(jQuery);